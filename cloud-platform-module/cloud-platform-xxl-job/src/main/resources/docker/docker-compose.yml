version: '3'
services:
  xxl-job-admin:
    image: xuxueli/xxl-job-admin:2.3.0
    container_name: xxl-job-admin
    restart: always  # 自动重启
    ports:
      - "8080:8080"
    environment:
      PARAMS: "--spring.datasource.url=jdbc:mysql://mysql8.0:3306/xxl_job?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true&serverTimezone=Asia/Shanghai \
               --spring.datasource.username=root \
               --spring.datasource.password=MaXinHai!970923 \
               --xxl.job.accessToken="
    volumes:
      - xxl_job_logs:/data/applogs  # 日志持久化到宿主机
    networks:
      - xxl-job-network

# 定义数据卷，用于持久化xxl-job数据
volumes:
  xxl_job_logs:
    driver: local

networks:
  xxl-job-network:
    driver: bridge